# 8.3. Patrones de Asignación

Además de la aplicación de patrones específicos por módulo, se definieron y aplicaron patrones arquitectónicos globales que rigen el comportamiento general del sistema, asegurando cohesión, escalabilidad y alineamiento con los atributos de calidad priorizados.

1. Arquitectura basada en Microservicios
El sistema está estructurado en torno a microservicios, donde cada uno encapsula una funcionalidad específica y es responsable de su propia lógica de negocio y persistencia. Este patrón permite:

Desacoplamiento entre componentes.

Escalabilidad independiente por módulo.

Implementación y despliegue autónomo.

Tolerancia a fallos mediante aislamiento de servicios.

Este enfoque también facilita la asignación modular de tareas al equipo de desarrollo, fomentando una mayor productividad y mantenibilidad.

2. API Gateway
Se implementó un API Gateway como punto central de entrada para todas las solicitudes externas al sistema. Este componente cumple funciones como:

Enrutamiento dinámico hacia microservicios internos.

Aplicación de políticas de seguridad.

Autenticación de usuarios mediante tokens JWT.

Registro y trazabilidad de peticiones.

Gracias a este patrón, se simplifica el acceso externo y se estandariza la forma en la que los clientes interactúan con la arquitectura interna.

3. Separación por capas (Layered Architecture)
Cada microservicio sigue una estructura en capas que incluye:

Capa de presentación (controladores): maneja las solicitudes HTTP entrantes.

Capa de lógica de negocio (servicios): contiene las reglas y validaciones específicas del dominio.

Capa de acceso a datos (repositorios): interactúa con la base de datos correspondiente.

Este patrón favorece la mantenibilidad y permite modificar una capa sin afectar directamente las demás.

4. Contenerización y Despliegue
Se adoptó el patrón de contenerización usando Docker, lo que permite:

Entornos replicables para desarrollo y producción.

Aislamiento de dependencias por microservicio.

Mayor facilidad en el despliegue y pruebas.

Cada microservicio se ejecuta dentro de un contenedor independiente, lo cual habilita estrategias de despliegue controlado y facilita el escalado horizontal.

5. Registro Centralizado de Logs
Aunque no se ha integrado aún un sistema de observabilidad completo, se diseñó el sistema para soportar el patrón de logging centralizado, mediante:

Estructura homogénea de logs por servicio.

Identificadores de usuario y timestamp en cada transacción.

Capacidad de redirigir los logs a herramientas como ELK Stack o Prometheus/Grafana en etapas posteriores.

Este patrón permitirá auditar acciones, detectar fallos y realizar análisis históricos del sistema.

6. Validación y Seguridad Transversal
Se implementaron validaciones de entrada y control de acceso en todas las rutas mediante middlewares reutilizables. Este patrón se aplica globalmente en:

Validación de tokens JWT antes de ejecutar lógica de negocio.

Verificación de roles para acceso a rutas protegidas.

Sanitización de entradas para prevenir ataques de inyección.

Este enfoque estandarizado garantiza que todos los puntos de acceso estén protegidos de forma coherente.
